---

copyright:
  years: 2018
lastupdated: "2018-11-01"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# About federated solutions

Blockchain Document Store enables Organizations to run federated instances of a
master IBM Blockchain Solution. A federated instance is essentially a clone of
the master solution instance that allows organizations to manage their solution
users and applications privately and confidentially on the federated instance.

Support for federated solutions facilitates what is otherwise a complex architectural
challenge for blockchain network administrators, as follows:

- A solution defined as a master instance is shared by multiple federated instances
- A single user login provides access to all federated instances
- Organizations within the federation store blockchain credentials on their own instance, rather than on the master.
- Organizations can be migrated from any wallet manager in the federated solution to any other wallet manager in the federated solution

Figure 1. below depicts the concept of federated solutions - running on a clone
of a master instance while managing users and applications on a federated instance:

Figure 1. Federated solutions  
![Federated solutions](images/federated-solutions.png "Federated solutions")


## Federating independent instances of Solution Manager

(Hmmmm, but BSM is not a solution, technically right.)

All referenced Blockchain Solution Manager APIs are available here:  https://dev.pbsa-dev1.us-south.containers.mybluemix.net/onboarding/swagger/

The following process flow describes how an instance of an IBM Blockchain Solution
becomes a master instance of a federated solution:

1. A Network Administrator of an IBM Blockchain Solution sends an invitation for
an Organization to join a federated solution. This invitation is generated by  
a call to the POST `/v1/solutions/{solutionId}/invitations` endpoint, supplying
the **solutionId** as a path parameter, and the **instanceIdOfInvitee** and
**onboardingServiceId** parameters in the body of the post. For example:
```
{
  "instanceIdOfInvitee": "dev.pbsa-dev1.us-south.containers.mybluemix.net/ingress_path",
  "onboardingServiceId": "ServiceId-6f95e75a-7b04-4b4a-b14f-9bb4059d2faa"
}
```

The response to the POST takes the form of a JSON object which contains a
one-time-code, solution id:

```
{
  "ok": true,
  "statusCode": 200,
  "response": {
    "onetimecode": "c69cf24a-b882-4536-9a41-94d3d1e7f3a5",
    "solutionId": "30e20826-e1bc-45e1-a4bb-3620081e0dc8",
    "userid": "acd4d022-99d7-4448-b580-b844a502b04c",
    "created": "2018-05-19T12:26:05.312Z",
    "expires": "2018-05-20T12:26:05.312Z",
    "masterURL": "https://solution-manager/onboarding1",
    "status": "Invited"
  }
}
```
2. The second step of the flow requires a network administrator of the invited instance to send the response object shown above to the invited instance. This can be done by a human user with NetworkAdmin role on the invited instance, or by the service broker. A network administrator or the service broker of the invited instance must login and send the invitation in the body of a POST to the `/v1/solutions/{solutionId}/invited` API. The outcome of this step is that the content of the invitation is stored in the joined solutions table with a state of Invited.
3. The third step requires a network administrator of the invited instance to accept the invitation. The network administrator of the invited instance or the service broker of the invited instance must login and retrieve the invitation via http GET request to the the `/v1/federation/invited` endpoint. An example of said output is shown below:
```
{
    "ok": true,
    "response": [
        {
            "created": "2018-08-09T01:59:21.359Z",
            "expires": "2018-08-10T01:59:21.328Z",
            "instanceId": null,
            "masterURL": "https://solution-manager/onboarding1",
            "onboardingServiceId": null,
            "onetimecode": "36bfe31a-bf4e-4e72-8a66-460afc594076",
            "solutionId": "30e20826-e1bc-45e1-a4bb-3620081e0dc8",
            "status": "Invited",
            "userId": "0151982c-5294-40da-8601-9384308e04aa"
        }
    ],
    "statusCode": 200
}
```
4. The fourth step of the flow requires network administrator of the invited instance to send the response object of the above GET response to the `/v1/solutions/{solutionId}/acceptAPI` in the body of a POST request. For example:
```
{
  "onetimecode": "abcdef12345",
  "solutionId": "30e20826-e1bc-45e1-a4bb-3620081e0dc8",
  "masterURL": "https://solution-manager/onboarding1"
}
```
The response from accepting the invitation takes the form of a JSON object which contains the onetimecode and masterURL of the hosting instance. For example:
```
{
  "ok": true,
  "statusCode": 0,
  "response": {
    "onetimecode": "f42b5a80-2d82-4fa7-a2d0-37ebd27fbffb",
    "masterURL": "https://solution-manager/onboarding1"
  }
}
```

## Subheading 2
...

## What's next?
Manage your documents, as described in [Manage documents](manage-documents.html).
